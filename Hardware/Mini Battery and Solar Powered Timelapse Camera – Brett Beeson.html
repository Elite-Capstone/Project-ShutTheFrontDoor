<!DOCTYPE html>
<!-- saved from url=(0075)https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/ -->
<html lang="en-AU"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://brettbeeson.com.au/xmlrpc.php">

<title>Mini Battery and Solar Powered Timelapse Camera – Brett Beeson</title>
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Brett Beeson » Feed" href="https://brettbeeson.com.au/feed/">
<link rel="alternate" type="application/rss+xml" title="Brett Beeson » Comments Feed" href="https://brettbeeson.com.au/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Brett Beeson » Mini Battery and Solar Powered Timelapse Camera Comments Feed" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/brettbeeson.com.au\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3.6"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="sydney-bootstrap-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/bootstrap.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="foobox-free-min-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/foobox.free.min.css" type="text/css" media="all">
<link rel="stylesheet" id="sydney-fonts-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/css" type="text/css" media="all">
<link rel="stylesheet" id="sydney-style-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/style.css" type="text/css" media="all">
<style id="sydney-style-inline-css" type="text/css">
.site-header { background-color:rgba(38,50,70,0.9);}
.site-title { font-size:32px; }
.site-description { font-size:16px; }
#mainnav ul li a { font-size:14px; }
h1 { font-size:52px; }
h2 { font-size:42px; }
h3 { font-size:32px; }
h4 { font-size:25px; }
h5 { font-size:20px; }
h6 { font-size:18px; }
body { font-size:16px; }
.single .hentry .title-post { font-size:36px; }
.header-image { background-size:cover;}
.header-image { height:300px; }
.site-header.float-header { background-color:rgba(0,0,0,0.9);}
@media only screen and (max-width: 1024px) { .site-header { background-color:#000000;}}
.site-title a, .site-title a:hover { color:#ffffff}
.site-description { color:#ffffff}
#mainnav ul li a, #mainnav ul li::before { color:#ffffff}
#mainnav .sub-menu li a { color:#ffffff}
#mainnav .sub-menu li a { background:#1c1c1c}
.text-slider .maintitle, .text-slider .subtitle { color:#ffffff}
body { color:#47425d}
#secondary { background-color:#ffffff}
#secondary, #secondary a { color:#767676}
.footer-widgets { background-color:#252525}
.btn-menu { color:#ffffff}
#mainnav ul li a:hover { color:#d65050}
.site-footer { background-color:#1c1c1c}
.site-footer,.site-footer a { color:#666666}
.overlay { background-color:#000000}
.page-wrap { padding-top:83px;}
.page-wrap { padding-bottom:100px;}
@media only screen and (max-width: 1025px) {		
			.mobile-slide {
				display: block;
			}
			.slide-item {
				background-image: none !important;
			}
			.header-slider {
			}
			.slide-item {
				height: auto !important;
			}
			.slide-inner {
				min-height: initial;
			} 
		}
@media only screen and (max-width: 780px) { 
    	h1 { font-size: 32px;}
		h2 { font-size: 28px;}
		h3 { font-size: 22px;}
		h4 { font-size: 18px;}
		h5 { font-size: 16px;}
		h6 { font-size: 14px;}
    }

</style>
<link rel="stylesheet" id="sydney-font-awesome-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/font-awesome.min.css" type="text/css" media="all">
<!--[if lte IE 9]>
<link rel='stylesheet' id='sydney-ie9-css'  href='https://brettbeeson.com.au/wp-content/themes/sydney/css/ie9.css?ver=5.3.6' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="tablepress-default-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/default.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-featherlight-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/wp-featherlight.min.css" type="text/css" media="all">
<link rel="stylesheet" id="sccss_style-css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/saved_resource" type="text/css" media="all">
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/jquery.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/jquery-migrate.min.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/foobox.free.min.js.download"></script>
<script type="text/javascript">
/* Run FooBox FREE (v2.6.4) */
(function( FOOBOX, $, undefined ) {
  FOOBOX.o = {wordpress: { enabled: true }, countMessage:'image %index of %total', excludes:'.fbx-link,.nofoobox,.nolightbox,a[href*="pinterest.com/pin/create/button/"]', affiliate : { enabled: false }};
  FOOBOX.init = function() {
    $(".fbx-link").removeClass("fbx-link");
    $(".foogallery-container.foogallery-lightbox-foobox, .foogallery-container.foogallery-lightbox-foobox-free, .gallery, .wp-block-gallery, .wp-caption, .wp-block-image, a:has(img[class*=wp-image-]), .foobox").foobox(FOOBOX.o);
  };
})( window.FOOBOX = window.FOOBOX || {}, FooBox.$ );

FooBox.ready(function() {

  jQuery("body").append("<span aria-hidden=\"true\" class=\"foobox_font_preload\" style=\"font-family:'foobox'; color:transparent; position:absolute; top:-9999px; left: -9999px;\">f</span>");
  FOOBOX.init();
  jQuery('body').on('post-load', function(){ FOOBOX.init(); });

});
</script>
<link rel="https://api.w.org/" href="https://brettbeeson.com.au/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://brettbeeson.com.au/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://brettbeeson.com.au/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Use Monit on AWS and Ubuntu" href="https://brettbeeson.com.au/installing-monit-on-aws/">
<link rel="next" title="ESP32 Tricks and Tips" href="https://brettbeeson.com.au/esp32-tricks-and-tips/">
<meta name="generator" content="WordPress 5.3.6">
<link rel="canonical" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/">
<link rel="shortlink" href="https://brettbeeson.com.au/?p=592">
<link rel="alternate" type="application/json+oembed" href="https://brettbeeson.com.au/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fbrettbeeson.com.au%2Fmini-battery-and-solar-powered-timelapse-camera%2F">
<link rel="alternate" type="text/xml+oembed" href="https://brettbeeson.com.au/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fbrettbeeson.com.au%2Fmini-battery-and-solar-powered-timelapse-camera%2F&amp;format=xml">
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style><link rel="icon" href="https://brettbeeson.com.au/wp-content/uploads/2018/11/brettbeeson-500x500-150x150.png" sizes="32x32">
<link rel="icon" href="https://brettbeeson.com.au/wp-content/uploads/2018/11/brettbeeson-500x500-230x230.png" sizes="192x192">
<link rel="apple-touch-icon-precomposed" href="https://brettbeeson.com.au/wp-content/uploads/2018/11/brettbeeson-500x500-230x230.png">
<meta name="msapplication-TileImage" content="https://brettbeeson.com.au/wp-content/uploads/2018/11/brettbeeson-500x500-300x300.png">
<link rel="stylesheet" type="text/css" href="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/prettify.css"><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></head>

<body data-rsssl="1" class="post-template-default single single-post postid-592 single-format-standard wp-featherlight-captions elementor-default siteScrolled">

	<div class="preloader" style="opacity: 0; display: none;">
	    <div class="spinner">
	        <div class="pre-bounce1"></div>
	        <div class="pre-bounce2"></div>
	    </div>
	</div>
	
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#content">Skip to content</a>

		
	<div class="header-clone" style="height: 88px;"></div>

	
	<header id="masthead" class="site-header fixed float-header" role="banner">
		<div class="header-wrap">
            <div class="container">
                <div class="row">
				<div class="col-md-4 col-sm-8 col-xs-12">
		        					<h1 class="site-title"><a href="https://brettbeeson.com.au/" rel="home">Brett Beeson</a></h1>
					<h2 class="site-description">A Human in Brisbane, Australia</h2>	        
		        				</div>
				<div class="col-md-8 col-sm-4 col-xs-12">
					<div class="btn-menu"></div>
					<nav id="mainnav" class="mainnav" role="navigation">
						<div class="menu-menu-1-container"><ul id="menu-menu-1" class="menu"><li id="menu-item-233" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-233"><a href="https://brettbeeson.com.au/category/computing/">Computing</a>
<ul class="sub-menu">
	<li id="menu-item-498" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-498"><a href="https://brettbeeson.com.au/web-design-services/">Web Design Services</a></li>
	<li id="menu-item-328" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-328"><a href="https://brettbeeson.com.au/category/computing/iot/">Internet Of Things</a></li>
	<li id="menu-item-497" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-497"><a href="https://brettbeeson.com.au/category/computing/programming/">Programming</a></li>
</ul>
</li>
<li id="menu-item-234" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-234"><a href="https://brettbeeson.com.au/category/hikingandmountains/">Hiking, Skiing, Mountains</a></li>
<li id="menu-item-316" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-316"><a href="https://brettbeeson.com.au/category/software/">Software</a>
<ul class="sub-menu">
	<li id="menu-item-502" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-has-children menu-item-502"><a href="https://brettbeeson.com.au/green-star-central/">Green Star Central</a>
	<ul class="sub-menu">
		<li id="menu-item-501" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-501"><a href="https://brettbeeson.com.au/green-star-central-help/">Help</a></li>
		<li id="menu-item-500" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-500"><a href="https://brettbeeson.com.au/green-star-central-faqs/">FAQs</a></li>
	</ul>
</li>
	<li id="menu-item-499" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-499"><a href="https://brettbeeson.com.au/beeson-excel-function/">Beeson Excel Function</a></li>
</ul>
</li>
<li id="menu-item-408" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-408"><a href="https://brettbeeson.com.au/category/sustainablebuildings/">Sustainable Buildings</a>
<ul class="sub-menu">
	<li id="menu-item-327" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-327"><a href="https://brettbeeson.com.au/category/sustainablebuildings/energy-monitoring/">Energy Monitoring</a></li>
	<li id="menu-item-409" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-409"><a href="https://brettbeeson.com.au/category/sustainablebuildings/a39house/">A39 House</a></li>
	<li id="menu-item-505" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-505"><a href="https://brettbeeson.com.au/category/sustainablebuildings/h33-house/">H33 House</a></li>
	<li id="menu-item-468" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-468"><a href="https://brettbeeson.com.au/category/sustainablebuildings/architecture/">Architecture</a></li>
</ul>
</li>
<li id="menu-item-561" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-561"><a href="https://brettbeeson.com.au/category/misc/">Misc</a>
<ul class="sub-menu">
	<li id="menu-item-562" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-562"><a href="https://brettbeeson.com.au/category/misc/beekeeping/">Beekeeping</a></li>
	<li id="menu-item-563" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-563"><a href="https://brettbeeson.com.au/category/misc/timelapse/">Timelapse</a></li>
	<li id="menu-item-795" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-795"><a href="https://brettbeeson.com.au/category/misc/beer-brewing/">Beer Brewing</a></li>
</ul>
</li>
</ul></div>					</nav><!-- #site-navigation -->
				</div>
				</div>
			</div>
		</div>
	</header><!-- #masthead -->

	
	<div class="sydney-hero-area">
				<div class="header-image">
			<div class="overlay"></div>			<img class="header-inner" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/header.jpg" width="1920" alt="Brett Beeson" title="Brett Beeson">
		</div>
		
			</div>

	
	<div id="content" class="page-wrap">
		<div class="container content-wrapper">
			<div class="row">	
	
	
	<div id="primary" class="content-area col-md-9 fullwidth">

		
		<main id="main" class="post-wrap" role="main">

		
			
<article id="post-592" class="post-592 post type-post status-publish format-standard hentry category-iot category-timelapse">
	
	
	<header class="entry-header">
		
		<div class="meta-post">
			<a href="https://brettbeeson.com.au/category/computing/iot/" title="Internet Of Things" class="post-cat">Internet Of Things</a><a href="https://brettbeeson.com.au/category/misc/timelapse/" title="Timelapse" class="post-cat">Timelapse</a>		</div>

		<h1 class="title-post entry-title">Mini Battery and Solar Powered Timelapse Camera</h1>
				<div class="single-meta">
			<span class="posted-on">Posted <a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/" rel="bookmark"><time class="entry-date published" datetime="2019-05-13T09:40:14+10:00">May 13, 2019</time><time class="updated" datetime="2019-07-08T16:53:01+10:00">July 8, 2019</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="https://brettbeeson.com.au/author/brett/">Brett</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	
	<div class="entry-content">
		
<p>I wanted a small, battery-powered timelapse camera. First I tried <a href="https://brettbeeson.com.au/time-lapsing/">mobile phones</a> but they were not stable in the long term. Previously I’d used a <a href="https://brettbeeson.com.au/time-lapsing-with-raspberry-pi/">Raspberry Pi</a> which is good, but not battery friendly, a bit big, and a bit of an overkill. A PiZero would be an alternative (untried).</p>



<p>Instead, I choose a <strong>ESP32-Cam</strong> which can:</p>



<ul><li>go to deep-sleep (10uA for the ESP, Cam to be tested) overnight</li><li>save JPG files from its mini camera (but good enough) to SD card</li><li>connect to WiFi to transmit / control</li><li>be small and cheap!</li></ul>



<p>I use the following:</p>



<ul><li>ESP32-Cam from diymore.cc which is similar to AI-Thinker</li><li>A 2000mAh 585460 flat LiPo battery. A 18650 LiPo battery worked, but  needs seperate low-voltage protection.</li><li><a href="https://learn.adafruit.com/usb-dc-and-solar-lipoly-charger/using-the-charger?view=all#downloads">Adafruit Solar Charger</a></li><li>3v to 5v USB step up (from battery output to 5V* for Cam)</li><li>FTDI Programmer to flash the firmware</li><li>1W 6V solar panel (20cmx20cm)</li></ul>



<p>* Note 5V is required for the ESP32-Cam, although the ESP32 needs only 3.3V.</p>



<h2>Flashing</h2>



<p>I used a 3.3V / 5V (switchable via toggle) FDTI programmer. I used 5V thinking that I’d supply 5V to VCC and 3.3V to the RX/TX pins. Oops! It actually supplies 5V to RX/TX pins too. Seems ok but better to select 3.3V to get this on the RX/TX and grab a 5V breakout pin to power the board.</p>



<h2>Power Supply and Battery</h2>



<p>A 1W solar panel provides 4Wh/W (Brisbane) x 1W = 4Wh per day. </p>



<p>This is 4Wh / 3.3V = 1.2Ah per day @ 3.3V. Say 1000mA/day. The 18650 battery is 2600mAh, so needs 2.6 days to charge!</p>



<p>Power consumption of the camera is to be tested. ESP32 is 50mA and only 10uA alseep. Maybe 50mA average (?), or 2600mAh / 50mA = 52h on battery. On panels, maybe 50mA * 10h = 500 mAh/day required:</p>



<p><strong>First test 1 June 2019:</strong> Without sleeping, ran for about 20 hours continuously with photos at 10s. This is about right: in this mode, we have Wifi, Cam and SD on. That takes about 130mA which gives a run-time of 15 hours.</p>



<p><strong>More detailed readings:</strong> </p>



<ul><li>Deepsleep is 4mA instead of bare ESP32 of 10uA. No a major problem in this application.</li><li>Camera is an additional 10mA, regardless of taking or just ‘on’.</li><li>That bright LED is a power sucker.</li><li>Turning the SD has no power penalty. Even holding a file open has no impact. </li><li>Using <strong>esp_wifi_set_ps(WIFI_PS_NONE))</strong> will improve upload speed, but </li></ul>



<div id="tablepress-8_wrapper" class="dataTables_wrapper no-footer"><table id="tablepress-8" class="tablepress tablepress-id-8 dataTable no-footer" role="grid">
<thead>
<tr class="row-1 odd" role="row"><th class="column-1 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="Mode: activate to sort column ascending" style="width: 276px;">Mode</th><th class="column-2 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="WiFi: activate to sort column ascending" style="width: 55px;">WiFi</th><th class="column-3 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="Cam: activate to sort column ascending" style="width: 36px;">Cam</th><th class="column-4 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="SD Active: activate to sort column ascending" style="width: 72px;">SD Active</th><th class="column-5 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="CPU: activate to sort column ascending" style="width: 35px;">CPU</th><th class="column-6 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="LED Pin4: activate to sort column ascending" style="width: 69px;">LED Pin4</th><th class="column-7 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="mA: activate to sort column ascending" style="width: 103px;">mA</th><th class="column-8 sorting" tabindex="0" aria-controls="tablepress-8" rowspan="1" colspan="1" aria-label="Run time @ 2000mAh (h): activate to sort column ascending" style="width: 190px;">Run time @ 2000mAh (h)</th></tr>
</thead>
<tbody class="row-hover">










<tr class="row-2 even" role="row">
	<td class="column-1">DeepSleep</td><td class="column-2"></td><td class="column-3"></td><td class="column-4"></td><td class="column-5"></td><td class="column-6"></td><td class="column-7">4</td><td class="column-8">500</td>
</tr><tr class="row-3 odd" role="row">
	<td class="column-1">SD</td><td class="column-2"></td><td class="column-3"></td><td class="column-4"></td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">50</td><td class="column-8">40</td>
</tr><tr class="row-4 even" role="row">
	<td class="column-1">Continuous SD Save (No LED)</td><td class="column-2"></td><td class="column-3"></td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">90</td><td class="column-8">22</td>
</tr><tr class="row-5 odd" role="row">
	<td class="column-1">SD, WiFi, </td><td class="column-2">x (No PS)</td><td class="column-3">x </td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">120</td><td class="column-8"></td>
</tr><tr class="row-6 even" role="row">
	<td class="column-1">SD, WiFi, Cam</td><td class="column-2">x (No PS)</td><td class="column-3">x </td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">180 (230 photo)</td><td class="column-8"></td>
</tr><tr class="row-7 odd" role="row">
	<td class="column-1">SD, Wifi, Cam, Modem Sleep / PS On</td><td class="column-2">x (PS)</td><td class="column-3">x</td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">150 (average)</td><td class="column-8">13</td>
</tr><tr class="row-8 even" role="row">
	<td class="column-1">SD, Wifi Off, Cam (Wifi was on)</td><td class="column-2"></td><td class="column-3">x</td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">100 (170 photo)</td><td class="column-8"></td>
</tr><tr class="row-9 odd" role="row">
	<td class="column-1">SD, Wifi Off, Cam Off (Cam,Wifi were on)</td><td class="column-2"></td><td class="column-3"></td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6"></td><td class="column-7">70</td><td class="column-8"></td>
</tr><tr class="row-10 even" role="row">
	<td class="column-1">FTP Uploading (LED)</td><td class="column-2">x</td><td class="column-3"></td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6">x</td><td class="column-7">180</td><td class="column-8">11</td>
</tr><tr class="row-11 odd" role="row">
	<td class="column-1">Continuous SD Save (LED)</td><td class="column-2"></td><td class="column-3"></td><td class="column-4">x</td><td class="column-5">x</td><td class="column-6">x</td><td class="column-7">340</td><td class="column-8">6</td>
</tr></tbody>
</table></div>
<!-- #tablepress-8 from cache -->



<p>We see that <a href="https://www.geekstips.com/esp32-review-idf-programming-tutorial/">compared to a ‘bare’ ESP32</a>,  the Cam version reasonable energy consumption if you remove the LED.  However, the deepsleep mode is no longer extremely low consumption. This  suggests a battery-only unit would only run for a week, but a solar-and-battery is feasible. Alternatively, a weekly recharge might  work.</p>



<p>WiFi takes about 1.3s to start and the Cam turns 0.5s to start. </p>



<p>Deepsleep might be good for long periods. We estimate the runtime (in hours).<br></p>



<div id="tablepress-9_wrapper" class="dataTables_wrapper no-footer"><table id="tablepress-9" class="tablepress tablepress-id-9 dataTable no-footer" role="grid">
<thead>
<tr class="row-1 odd" role="row"><th class="column-1 sorting" tabindex="0" aria-controls="tablepress-9" rowspan="1" colspan="1" aria-label="Method: activate to sort column ascending" style="width: 260px;">Method</th><th class="column-2 sorting" tabindex="0" aria-controls="tablepress-9" rowspan="1" colspan="1" aria-label="Photos @ 3s
Equalish: activate to sort column ascending" style="width: 104px;">Photos @ 3s<br>
Equalish</th><th class="column-3 sorting" tabindex="0" aria-controls="tablepress-9" rowspan="1" colspan="1" aria-label="Photos @ 10s
Equalish
: activate to sort column ascending" style="width: 114px;">Photos @ 10s<br>
Equalish<br>
</th><th class="column-4 sorting" tabindex="0" aria-controls="tablepress-9" rowspan="1" colspan="1" aria-label="Photos @ 60s
[Deepsleep, Batch Upload]: activate to sort column ascending" style="width: 221px;">Photos @ 60s<br>
[Deepsleep, Batch Upload]</th><th class="column-5 sorting" tabindex="0" aria-controls="tablepress-9" rowspan="1" colspan="1" aria-label="Photos @ 600s
[Deepsleep, Batch Upload]: activate to sort column ascending" style="width: 221px;">Photos @ 600s<br>
[Deepsleep, Batch Upload]</th></tr>
</thead>
<tbody class="row-hover">




<tr class="row-2 even" role="row">
	<td class="column-1">Always On, No WiFi</td><td class="column-2">23</td><td class="column-3">31</td><td class="column-4">38</td><td class="column-5">40</td>
</tr><tr class="row-3 odd" role="row">
	<td class="column-1">Deep Sleep, No Wifi</td><td class="column-2">26</td><td class="column-3">61</td><td class="column-4">222</td><td class="column-5">500</td>
</tr><tr class="row-4 even" role="row">
	<td class="column-1">Deep Sleep, Save, Upload in Batch</td><td class="column-2">18</td><td class="column-3">43</td><td class="column-4">182</td><td class="column-5">426</td>
</tr><tr class="row-5 odd" role="row">
	<td class="column-1">Always On, WiFi, Upload in Batch</td><td class="column-2">15</td><td class="column-3">24</td><td class="column-4">36</td><td class="column-5">39</td>
</tr></tbody>
</table></div>
<!-- #tablepress-9 from cache -->



<p>So regardless of if we have WiFi or not,  the upshot is, </p>



<ul><li>Intervals &lt;10s: Always On is fine<ul><li>Use Modem Sleep (default) on to reduce standby WiFi power</li><li>13h of operation is insufficient – use a larger battery (5000mAh) to get 2.5 days operation and use a solar panel.</li></ul></li><li>Intervals &gt;60s: Deepsleeping worthwhile.</li></ul>



<p></p>



<h3>Energy Results and Further Improvements</h3>



<p>Real-life battery life on 2000mAh is still poor : only 6 hours. This is due to the standby 70mA (i.e. cam not taking but init’d, WiFi off). Arduino IDE doesn’t allow full control of sleep modes. So I switched to ESP-IDF. </p>



<p>Based on these <a href="https://blog.voneicken.com/2018/lp-wifi-esp32-dfs/">excellent posts about ESP32 battery life</a>, I tested the ESP32-CAM board. This is based on the power_save example. Moved to using a 1ohm resistor and measuring voltage to find the current (I=V/R) – this is more convenient that an in-line DMM current meter.</p>



<p><br></p>



<table id="tablepress-10" class="tablepress tablepress-id-10">
<thead>
<tr class="row-1 odd">
	<th class="column-1">Mode</th><th class="column-2">Current (mA)</th><th class="column-3">Description</th><th class="column-4">Notes</th><th class="column-5">&nbsp;</th>
</tr>
</thead>
<tbody class="row-hover">
<tr class="row-2 even">
	<td class="column-1">Default</td><td class="column-2">21</td><td class="column-3">Full defaults, wait at startup</td><td class="column-4"></td><td class="column-5"></td>
</tr>
<tr class="row-3 odd">
	<td class="column-1">Add basic DFS</td><td class="column-2">14</td><td class="column-3">Enable DFS from menuconfig</td><td class="column-4"></td><td class="column-5"></td>
</tr>
<tr class="row-4 even">
	<td class="column-1">Better  DFS</td><td class="column-2">5</td><td class="column-3">Scale: 10MHz to 80MHz</td><td class="column-4"></td><td class="column-5"></td>
</tr>
<tr class="row-5 odd">
	<td class="column-1">Wifi On</td><td class="column-2">120</td><td class="column-3">PS_NONE</td><td class="column-4">(DFS reset to 10 to 240MHz)</td><td class="column-5"></td>
</tr>
<tr class="row-6 even">
	<td class="column-1">Wifi Default</td><td class="column-2">15 (20 avg?)</td><td class="column-3"> PS_MODEM_MIN</td><td class="column-4"></td><td class="column-5"></td>
</tr>
<tr class="row-7 odd">
	<td class="column-1">Wifi Max Powersave</td><td class="column-2">7 (10 avg?)</td><td class="column-3"> PS_MODEM_MAX</td><td class="column-4">The "listen_interval" only affects this mode. Greater than 10 (default: 3) is not interactive.</td><td class="column-5"></td>
</tr>
</tbody>
</table>
<!-- #tablepress-10 from cache -->



<p>We see that Dynamic Frequency Scaling (i.e. clock gate the CPU when idle) is very effective to stop idle time chewing mA. With <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/system/power_management.html">WiFi docs</a>, using the MODEM_SLEEP mode in default (“MIN”) mode is pretty good. Bumping up the “MAX” mode allows the listen_interval to be set. It’s in 100mS units. Setting to 1s (i.e 10x) results in some improvements.</p>



<p>This looks promising. Now we need check the current when the camera is init’d but idle.<br></p>



<h2>Lack of GPIO!</h2>



<p>The ESP32 needs to know the <a href="https://forums.adafruit.com/viewtopic.php?f=19&amp;t=76581#p403655">state of the battery</a> and solar, so it can control itself. It uses the Adafruit solar controller’s output. It also uses time-of-day to  off when dark (a PE cell would be an alternative).</p>



<p class="has-background has-pale-pink-background-color">Reading voltage required two GPIO pins. However, these are NOT AVAILABLE on the ESP-32 cam. All broken out pins appear to be used by either the SD card or UART or camera. GPIO16 didn’t work (TBC!). I couldn’t use the SD card pins. The only option I see is to use the TX/RX pins (GPIO1, GPIO3). These are not connected to the ADC so cannot read analog. Also this means serial is not available, but RemoteDebugger library is possible.</p>



<p class="has-text-color has-background has-very-dark-gray-color has-light-green-cyan-background-color">GPIO3 (RX) works to read the open-drain of the “charging” or “done” indicator. I can’t get GPIO1 (TX) to read, nor GPIO16. GPIO2 works but is used by the SD card. This <a href="https://randomnerdtutorials.com/esp32-pinout-reference-gpios/">comment agrees</a> with the TX/RX issue. Hence only a single digital input is available – either “charging” or “done”. As the least worst, I’ll use “done” to signal that uploading should start.</p>



<p class="has-text-color has-background has-very-dark-gray-color has-pale-pink-background-color">Hence, the following is ideal, but not possible:</p>



<p>Since the maximum possible voltage is 6V (“the voltage at L+ can rise to whatever comes out of your solar panel”), I use a voltage divider to halve the voltages before measuring with the ESP32’s ADC.</p>



<table class="wp-block-table aligncenter is-style-regular"><tbody><tr><td><strong>State</strong><br></td><td><strong>Charger</strong></td><td><strong>Action</strong></td></tr><tr><td>Lowish Battery, solar powering </td><td>L+ &gt; B+ (by &lt; 150mV)<br>B+ &gt; 3.2V</td><td>Wifi Off<br>Cam On<br></td></tr><tr><td>Low Battery</td><td>B+ &lt;= 3.2V</td><td>Deep sleep</td></tr><tr><td>Good solar, battery &gt; 50%</td><td>L+ &gt; B+ (by &gt; 150mV)<br><br>B+ &gt; 3.5V</td><td>Wifi Full<br><br>Cam On</td></tr><tr><td>No solar, battery &gt; 50%</td><td>L+ &lt; B+<br><br>B+ &gt; 3.5V</td><td>Wifi Minimal<br><br>Cam On</td></tr><tr><td>No solar, battery &lt; 50%</td><td>L+ &lt; B+<br><br>B+ &lt;= 3.5V</td><td>Wifi Off<br><br>Cam on</td></tr></tbody></table>



<h2>Image File Transfer</h2>



<p>Wifi Minimal means upload limited snapshots of the current images, while Wifi Full means upload all images. Some upload options:</p>



<ul><li><a href="https://github.com/lucasromeiro/DropboxManager">Dropbox</a> : adapt a  library</li><li>Upload to a server running Apache or similiar, via HTTP</li><li>scp : no libraries?</li><li><a href="https://github.com/JohnnyB1290/ESP32-FTP-Client">FTP</a>: easily adapt a library</li></ul>



<p>The dropbox option looked simplest, but the only library needed heavy modification to work with ESP32. This worked okay, but was very slow: approximately 3kB/s. This is only one medium quality image per 10s.</p>



<p>A <a href="https://github.com/JohnnyB1290/ESP32-FTP-Client">quality C library for FTP on the Esp32</a> worked well. The only trick was the ESP32-Arduino SD_MMC library mounts the card to “/sdcard” and fails if you try to mount at “/”. The Arduino File libraries understand this read from “/”. However, the FILE* ftp library sees “/sdcard”. A thin-wrapper in C++ to the FTP library always it to play nice with Arduino File classes.</p>



<p>Performance for FTP (ESP32 -&gt; WiFi -&gt; AWS EC2 server) was 120kB/S.  This is a few images per second.  </p>



<p>File opening is 300ms on the SD Card. Posix functions (FILE*) appear faster than fs::File classes in Arduino.</p>



<p>vsftpd worked well on AWS and Ubuntu after Googling fixed passive mode problems.</p>



<h2>Movie Creation and Monitoring</h2>



<p>The general approach is to get the image files to a server as simply as possible. Then do complex stuff on the server.</p>



<h4><strong>Monitoring</strong></h4>



<p> The latest image is copied to a known location for a webserver to display. A more advanced system would copy one file a minute (or so) to the webserver, which could then have a simliar forward/back viewer to preview the movie.</p>



<h4><strong>Movies</strong></h4>



<p>Every hour (or so), a script runs to create an hour-long movies. It would have to work out which movies are to be updated, based on new images. Use <a href="https://github.com/brettbeeson/tlmm">python and ffmpeg, and TimeLapseMovieMaker</a> to create videos.</p>



<p>A “movie-to-now” could be created by joining the hourly movies together.</p>



<p> Also, each day a daily movie could be made.</p>



<p>Images can be deleted once an hourly movie is made. However, how to handle the case where late-arriving images need to be added to an old movie? Perhaps some kind of simple database is required to track images and movies? Or a simple metric of delete-when-7 days old-and-movie-is-make?</p>



<h2> Programming</h2>



<p>Some of the elements are similar to “<a href="https://github.com/brettbeeson/esp32blobs">Blobs</a>” software, but sufficiently different to warrant a new project. </p>



<ul><li>Implement different tasks (upload, camera, etc) via FreeRTOS.</li><li>Use WifiManger to connect to station or use AP, as required.</li><li>On hard-reset (or some other signal such as flag on web server / physical button / every 1 hour), run configuration webserver.</li><li>Camera loop can sleep between takes</li><li>Time Task to check internet time / RTC (for timestamps)</li><li>Power Task  to check power supply and set flags / control operation. Related: sleep when dark.</li><li>Minimal upload can be done after image is taken. If so (i.e. enough battery/solar), it just uploads current image (every nth image) and closes WiFi.</li><li>Full upload as a permanent task which runs when possible.</li></ul>



<p>The separate tasks check their own conditions and block if not required, then a sleep_idle_hook to sleep whenever possible. This is event-driven.</p>



<p class="has-small-font-size">( An option would be to run in a loop, executing tasks when conditions are met. This is a more procedural style. )</p>



<h3>WebApp to Modify On-the-Fly</h3>



<p>A webpage to view the state of the ESP32, the last image and to modify things like the photo interval would be handy.</p>



<h4>The webserver </h4>



<p>It should</p>



<ul><li>Run as a single web page webapp and use AJAX or websockets to communicate. </li><li>Have a file browser and editor</li></ul>



<p>The Expressif <a href="https://github.com/espressif/arduino-esp32/tree/master/libraries/WebServer">WebServer</a> for arduino-esp32 is pretty simple and doesn’t support websocket, but has nice example and a ready-to-go file browser. I choose this initially. But the SDWebServer doesn’t work out of the box (some easy “/” related problems) and is limited to a single client.</p>



<p>The more complex <a href="https://github.com/me-no-dev/ESPAsyncWebServer">AsyncServer</a> seems more production-ready and has websockets. There are, however, fewer examples and no SD card file server for the ESP32. With some modifications, SPIFFSEditor can use SD_MMC filesystem (no folders, though – would need to add). The addHandler process is easy. <strong>I’ll use this.</strong></p>



<h4>Interface / Javascript</h4>



<p>AJAX or websockets will allow nicer development. I’m trying BootStrap to get a tidy interface. Bootply.com and layitout.com enable you to easily create a css/html set of file to display nice buuttons and the like.</p>



<p>Next, how to use JS or jQuery to communicate with the webserver? WebStorm is good for editting the html/css/js and provides a webserver to test it locally (on a pc).<br></p>
			</div><!-- .entry-content -->

	<footer class="entry-footer">
			</footer><!-- .entry-footer -->

	
</article><!-- #post-## -->

				<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links clearfix">
			<div class="nav-previous"><span>⟵</span><a href="https://brettbeeson.com.au/installing-monit-on-aws/" rel="prev">Use Monit on AWS and Ubuntu</a></div><div class="nav-next"><a href="https://brettbeeson.com.au/esp32-tricks-and-tips/" rel="next">ESP32 Tricks and Tips</a><span>⟶</span></div>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
			
<div id="comments" class="comments-area">

	
			<h4 class="comment-title">
			12 thoughts on “<span>Mini Battery and Solar Powered Timelapse Camera</span>”		</h4>

		
		<ol class="comments-list">
					<li id="comment-110" class="comment even thread-even depth-1 parent">
			<article id="div-comment-110" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/2ca3339bc82cc77beacf1e8c6338c3cd.png" srcset="https://secure.gravatar.com/avatar/2ca3339bc82cc77beacf1e8c6338c3cd?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Jim</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-110">
							<time datetime="2019-06-03T23:02:37+10:00">
								June 3, 2019 at 23:02							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Brett,<br>
An interesting article – thanks!<br>
I too have been experimenting with the ESP32-cam for timelapse recording. I intend to record  some building work that will be starting on my house soon.</p>
<p>A couple of things I’ve found; The onboard 3.3 regulator is very inefficient, I’m feeding around 3.6 volts directly to the 3.3V pin, so that regulator isn’t doing anything except draining power! I found that If I disconnected just the two outer pins of the regulator which is the large device near to the reset button, the standby current dropped from about 6mA to around 1.75mA. I’ve also experimented with removing then 1k pulldown resistor  for the ‘pwdwn’ pin on the camera, and connecting that line to the ‘cam pwr’ line on the ESP, the idea being that the camera gets powered off when ESP goes into deep sleep. That does appear to reduce the total sleep current to less than 1mA (I can’t accurately measure it but I think its about 0.7 – 0.8mA) The only problem I’ve found with this is that the camera takes time to adjust its light level each time the ESP wakes, so I’ve had to delay the picture capture by about 1 second, otherwise it’s over exposed.</p>
<p>I’ve found the AI-thinker schematic is here:<br>
<a href="https://www.reddit.com/r/esp32/comments/b6wyjt/aithinker_esp32cam_schematic/" rel="nofollow ugc">https://www.reddit.com/r/esp32/comments/b6wyjt/aithinker_esp32cam_schematic/</a></p>
<p>Jim (Norfolk, England)</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=110#respond" data-commentid="110" data-postid="592" data-belowelement="div-comment-110" data-respondelement="respond" aria-label="Reply to Jim">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-111" class="comment byuser comment-author-brett bypostauthor odd alt depth-2">
			<article id="div-comment-111" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/bb1a8e1626b206953ddb8c6f893f1c01.png" srcset="https://secure.gravatar.com/avatar/bb1a8e1626b206953ddb8c6f893f1c01?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Brett</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-111">
							<time datetime="2019-06-05T10:01:31+10:00">
								June 5, 2019 at 10:01							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Jim,<br>
I’d be interested to see your results. You can see a TL of my last house construction (“Sustainable Buildings &gt; A39 -&gt; Overview”).</p>
<p>I was a bit disappointed about the deepsleep current, as I’ve previously got 0.010mA for a FireBeetle Esp32 with a regulator. Getting &lt; 1.0mA might make a long-term, interior unit feasible. The 6W PV + 2000mAh battery seems to work well outside. At least in sunny Brisbane!

Thanks for the link. Cheers, Brett
</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=111#respond" data-commentid="111" data-postid="592" data-belowelement="div-comment-111" data-respondelement="respond" aria-label="Reply to Brett">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-127" class="comment even thread-odd thread-alt depth-1 parent">
			<article id="div-comment-127" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/35c0638f8f0d497c6f06b61f12afbb88.png" srcset="https://secure.gravatar.com/avatar/35c0638f8f0d497c6f06b61f12afbb88?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Jeremy Bree</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-127">
							<time datetime="2019-07-07T12:49:54+10:00">
								July 7, 2019 at 12:49							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Did you have a local AP that the ESP32 could connect to via WiFi? I am looking to run a long term time lapse of a house build and would prefer file uploads either regularly or intermittently but not sure how to run the 4G with out draining the battery.   Also, how did you fix the image quality issues? I have been tweaking the compression rates and a few other settings but the images are very washed out and low quality.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=127#respond" data-commentid="127" data-postid="592" data-belowelement="div-comment-127" data-respondelement="respond" aria-label="Reply to Jeremy Bree">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-130" class="comment byuser comment-author-brett bypostauthor odd alt depth-2">
			<article id="div-comment-130" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/bb1a8e1626b206953ddb8c6f893f1c01.png" srcset="https://secure.gravatar.com/avatar/bb1a8e1626b206953ddb8c6f893f1c01?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Brett</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-130">
							<time datetime="2019-07-08T16:07:25+10:00">
								July 8, 2019 at 16:07							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Jeremy! </p>
<p>Yes, I have a AP for WiFi upload. I haven’t used 4G for uploads. Currently I only get 12 hours of battery life (2000 mAh battery, 10s interval, high quality). I’m investigating power save modes now. General approach is to turn off WiFi until battery is fully charged (by solar panel), then do a ‘blast’ of upload. You might be able to do the same.<br>
I too have tried improving quality, but to no avail. There are other units (“ESP EYE”) and camera (“OV” series) which might be better?</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=130#respond" data-commentid="130" data-postid="592" data-belowelement="div-comment-130" data-respondelement="respond" aria-label="Reply to Brett">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-540" class="comment even thread-even depth-1 parent">
			<article id="div-comment-540" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/0d4988024539f1a51cbf51c11de080f4.png" srcset="https://secure.gravatar.com/avatar/0d4988024539f1a51cbf51c11de080f4?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn"><a href="http://i%20don%27t%20have%20a%20website./" rel="external nofollow ugc" class="url">Ed Williams</a></b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-540">
							<time datetime="2019-09-24T09:46:14+10:00">
								September 24, 2019 at 09:46							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Brett,<br>
You met me yesterday in a reply to mtnbkr88. I asked a question about accessing power saving modes on my ESP32-CAM. Thanks again for that. My real name is Ed. I’m now trying to find a way to check the voltage of the 18650 battery powering my board and I was sad to find there are no ADC pins available on the AI Thinker ESP32-CAM. I have a 6V 4.5W solar panel connected to a TP4056 board. This board charges the 18650 battery and also provides outputs to power a device. I have these outputs connected to DC to DC boost converter that puts out a steady 5v for my ESP32-CAM as long as the battery voltage is above 1.7v. So now I want a way to check the battery voltage from the ESP32-CAM. Any ideas? Thanks!</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=540#respond" data-commentid="540" data-postid="592" data-belowelement="div-comment-540" data-respondelement="respond" aria-label="Reply to Ed Williams">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-565" class="comment byuser comment-author-brett bypostauthor odd alt depth-2">
			<article id="div-comment-565" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/bb1a8e1626b206953ddb8c6f893f1c01.png" srcset="https://secure.gravatar.com/avatar/bb1a8e1626b206953ddb8c6f893f1c01?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Brett</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-565">
							<time datetime="2019-10-28T23:31:22+10:00">
								October 28, 2019 at 23:31							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Ed. I missed your comment, but don’t have any ideas. I ran into the same problem – no analog pins. If you don’t use the SD card, I think those pin would work.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=565#respond" data-commentid="565" data-postid="592" data-belowelement="div-comment-565" data-respondelement="respond" aria-label="Reply to Brett">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-542" class="pingback even thread-odd thread-alt depth-1">
			<div class="comment-body">
				Pingback: <a href="https://brettbeeson.com.au/streaming-videos-with-html5-and-dash/" rel="external nofollow ugc" class="url">Streaming Videos with HTML5 and Dash – Brett Beeson</a> 			</div>
		</li><!-- #comment-## -->
		<li id="comment-613" class="comment odd alt thread-even depth-1 parent">
			<article id="div-comment-613" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/19523e119c4b37ac29991711a08258c4.jpeg" srcset="https://secure.gravatar.com/avatar/19523e119c4b37ac29991711a08258c4?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Thomas Eldredge</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-613">
							<time datetime="2020-01-11T15:04:01+10:00">
								January 11, 2020 at 15:04							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi, thanks for the post. Very detailed.</p>
<p>Can you help me figure out the “/” related problems you had with SDWebServer. Or share the modifications on SPIFFSEditor to use SD_MMC filesystem?</p>
<p>I’m having a hard time getting a working method to access the SD card. I’ve tried FTP servers and a few browser based with no luck. Any help would be appreciated. Thanks.</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=613#respond" data-commentid="613" data-postid="592" data-belowelement="div-comment-613" data-respondelement="respond" aria-label="Reply to Thomas Eldredge">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-636" class="comment byuser comment-author-brett bypostauthor even depth-2">
			<article id="div-comment-636" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/bb1a8e1626b206953ddb8c6f893f1c01.png" srcset="https://secure.gravatar.com/avatar/bb1a8e1626b206953ddb8c6f893f1c01?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Brett</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-636">
							<time datetime="2020-01-24T22:43:15+10:00">
								January 24, 2020 at 22:43							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Thomas. I’m no sure what you’re asking exactly, but perhaps this FSEditor I adapted could be of use: <a href="https://github.com/brettbeeson/esp32/tree/master/components/timelapse" rel="nofollow ugc">https://github.com/brettbeeson/esp32/tree/master/components/timelapse</a></p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=636#respond" data-commentid="636" data-postid="592" data-belowelement="div-comment-636" data-respondelement="respond" aria-label="Reply to Brett">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-656" class="comment odd alt thread-odd thread-alt depth-1 parent">
			<article id="div-comment-656" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/07ecd0384d06fd4b66ba231716e5d765.png" srcset="https://secure.gravatar.com/avatar/07ecd0384d06fd4b66ba231716e5d765?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Thorsten</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-656">
							<time datetime="2020-02-10T06:08:06+10:00">
								February 10, 2020 at 06:08							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Brett,</p>
<p>I just got my ESP32 cam an now I am  looking for some ideas for battery poweredime lapse. There are some ideas in this comments like mass uploads. I also wonder where I can find the code. Also I would like to know if someone has compared the power for starting ESP and taking a photo from power down compared to staring from deep sleep.</p>
<p>My idea: I have created a pcb for my home automation to monitor temperature and humidity in diffrent rooms. A Attiny powered by 18650 is in sleep mode and wakes up at the given intervall. After wakeup it powers a MOSFET and measures the voltage of the 18650. The MOSFET powers a DC-C step down to 3,3V.  With this 3,3V a ESP01S measures  temperature &amp; himidity with SI7021. Also via software serial it gets from Attiny the voltage of the 18650. The data is send to a webserver and after sending the data, esp sends “shutdown” via software serial to Attiny which power off the MOSFET. If esp is not  sending “shutdown”, Attiny powers off after some seconds itself.</p>
<p>So my idea now is to change 3,3V step down to 5V step up and connect esp32 instead of esp01s. And if voltage of 18650 is high enough it will send from sd all images in “pipeline” and if power is low it will just save images to sd. And if voltage is very low the Attny will increase the invertall for wakeup.</p>
<p>Do you thing if this will work and if power consumption is less than starting from deep sleep?</p>
<p>Thanks<br>
Thorsten</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=656#respond" data-commentid="656" data-postid="592" data-belowelement="div-comment-656" data-respondelement="respond" aria-label="Reply to Thorsten">Reply</a></div>			</article><!-- .comment-body -->
		<ol class="children">
		<li id="comment-657" class="comment byuser comment-author-brett bypostauthor even depth-2">
			<article id="div-comment-657" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/bb1a8e1626b206953ddb8c6f893f1c01.png" srcset="https://secure.gravatar.com/avatar/bb1a8e1626b206953ddb8c6f893f1c01?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Brett</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-657">
							<time datetime="2020-02-10T15:39:38+10:00">
								February 10, 2020 at 15:39							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Thorsten,</p>
<p>Yes, that sounds reasonable. The deep sleep on Esp32Cam isn’t very low consumption, so a system to turn it off completely our make sense. I’d imagine this would be worthwhile at interval over one minute. </p>
<p>Good luck, Brett</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=657#respond" data-commentid="657" data-postid="592" data-belowelement="div-comment-657" data-respondelement="respond" aria-label="Reply to Brett">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		<li id="comment-658" class="comment odd alt thread-even depth-1">
			<article id="div-comment-658" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt="" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/07ecd0384d06fd4b66ba231716e5d765.png" srcset="https://secure.gravatar.com/avatar/07ecd0384d06fd4b66ba231716e5d765?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60">						<b class="fn">Thorsten</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#comment-658">
							<time datetime="2020-02-11T02:54:44+10:00">
								February 11, 2020 at 02:54							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thanks for your answer 🙂 Then I will try it!</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel="nofollow" class="comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/?replytocom=658#respond" data-commentid="658" data-postid="592" data-belowelement="div-comment-658" data-respondelement="respond" aria-label="Reply to Thorsten">Reply</a></div>			</article><!-- .comment-body -->
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://brettbeeson.com.au/mini-battery-and-solar-powered-timelapse-camera/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://brettbeeson.com.au/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate=""><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="592" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="0743f71e7e"></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="151"></p></form>	</div><!-- #respond -->
	
</div><!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->

	
			</div>
		</div>
	</div><!-- #content -->

	
	
    <a class="go-top show"><i class="fa fa-angle-up"></i></a>
		
	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info container">
			<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			<span class="sep"> | </span>
			Theme: <a href="https://athemes.com/theme/sydney" rel="nofollow">Sydney</a> by aThemes.		</div><!-- .site-info -->
	</footer><!-- #colophon -->

	
</div><!-- #page -->

<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/main.js.download"></script>
<script type="text/javascript">
/* <![CDATA[ */
var codePrettifyLoaderBaseUrl = "https:\/\/brettbeeson.com.au\/wp-content\/plugins\/code-prettify\/prettify";
/* ]]> */
</script>

<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/scripts.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/main.min.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/skip-link-focus-fix.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/comment-reply.min.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/wpFeatherlight.pkgd.min.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/wp-embed.min.js.download"></script>
<script type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/jquery.datatables.min.js.download"></script>
<script async="async" type="text/javascript" src="./Mini Battery and Solar Powered Timelapse Camera – Brett Beeson_files/form.js.download"></script>
<script type="text/javascript">
jQuery(document).ready(function($){
$('#tablepress-8').dataTable({"order":[],"orderClasses":false,"stripeClasses":["even","odd"],"paging":false,"searching":false,"info":false});
$('#tablepress-9').dataTable({"order":[],"orderClasses":false,"stripeClasses":["even","odd"],"paging":false,"searching":false,"info":false});
});
</script><script type="text/javascript">/* Run FooBox FREE (v2.6.4) */
(function( FOOBOX, $, undefined ) {
  FOOBOX.o = {wordpress: { enabled: true }, countMessage:'image %index of %total', excludes:'.fbx-link,.nofoobox,.nolightbox,a[href*="pinterest.com/pin/create/button/"]', affiliate : { enabled: false }};
  FOOBOX.init = function() {
    $(".fbx-link").removeClass("fbx-link");
    $(".foogallery-container.foogallery-lightbox-foobox, .foogallery-container.foogallery-lightbox-foobox-free, .gallery, .wp-block-gallery, .wp-caption, .wp-block-image, a:has(img[class*=wp-image-]), .foobox").foobox(FOOBOX.o);
  };
})( window.FOOBOX = window.FOOBOX || {}, FooBox.$ );

FooBox.ready(function() {

  jQuery("body").append("<span aria-hidden=\"true\" class=\"foobox_font_preload\" style=\"font-family:'foobox'; color:transparent; position:absolute; top:-9999px; left: -9999px;\">f</span>");
  FOOBOX.init();
  jQuery('body').on('post-load', function(){ FOOBOX.init(); });

});
</script>				<script type="text/javascript">
					if (window.addEventListener){
						window.addEventListener("DOMContentLoaded", function() {
							var arr = document.querySelectorAll("script[type='text/foobox']");
							for (var x = 0; x < arr.length; x++) {
								var script = document.createElement("script");
								script.type = "text/javascript";
								script.innerHTML = arr[x].innerHTML;
								arr[x].parentNode.replaceChild(script, arr[x]);
							}
						});
					} else {
						console.log("FooBox does not support the current browser.");
					}
				</script>
				


<span aria-hidden="true" class="foobox_font_preload" style="font-family:&#39;foobox&#39;; color:transparent; position:absolute; top:-9999px; left: -9999px;">f</span><span aria-hidden="true" class="foobox_font_preload" style="font-family:&#39;foobox&#39;; color:transparent; position:absolute; top:-9999px; left: -9999px;">f</span></body></html>